[{"filePath":"C:\\Users\\Jashon\\OneDrive\\Documents\\GitHub\\fpk-learner-v1\\src\\hooks\\useLearningAnalytics.ts","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadAnalytics'. Either include it or remove the dependency array.","line":399,"column":6,"nodeType":"ArrayExpression","endLine":399,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [loadAnalytics, user?.id]","fix":{"range":[14387,14397],"text":"[loadAnalytics, user?.id]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { supabase } from '@/integrations/supabase/client';\r\n\r\n// Minimal JSON type for typed metadata (keeps strictness without external deps)\r\ntype Json = string | number | boolean | null | { [key: string]: Json } | Json[];\r\nimport { useAuth } from '@/hooks/useAuth';\r\nimport type { EventPayload } from '@/utils/logger';\r\n\r\n// Advanced Learning Analytics Hook - Phase 4 Implementation\r\ninterface AnalyticsEvent {\r\n  id?: string;\r\n  user_id: string;\r\n  session_id: string;\r\n  interaction_type: 'question_asked' | 'answer_given' | 'misconception_corrected' | 'concept_mastered' | 'scaffold_provided';\r\n  topic: string;\r\n  difficulty_level: number;\r\n  success_rate: number;\r\n  time_spent_seconds: number;\r\n  cognitive_load_estimate: number;\r\n  engagement_score: number;\r\n  metadata: Json;\r\n  created_at?: string;\r\n}\r\n\r\ninterface LearningTrends {\r\n  understanding_trend: number[];\r\n  engagement_trend: number[];\r\n  difficulty_progression: number[];\r\n  topic_mastery: Record<string, number>;\r\n  time_analysis: {\r\n    average_session_time: number;\r\n    peak_learning_hours: number[];\r\n    consistency_score: number;\r\n  };\r\n}\r\n\r\ninterface PerformanceMetrics {\r\n  current_session: {\r\n    questions_answered: number;\r\n    concepts_explored: number;\r\n    misconceptions_addressed: number;\r\n    scaffolding_provided: number;\r\n    engagement_score: number;\r\n  };\r\n  overall: {\r\n    total_sessions: number;\r\n    average_understanding: number;\r\n    improvement_rate: number;\r\n    mastered_topics: string[];\r\n    struggling_areas: string[];\r\n  };\r\n}\r\n\r\n// Insight produced by analytics for UI/notifications\r\ninterface Insight {\r\n  type: 'positive' | 'concern' | 'engagement';\r\n  title: string;\r\n  message: string;\r\n  priority: 'low' | 'medium' | 'high';\r\n}\r\n\r\nexport type UseLearningAnalyticsParams = { courseId: string; userId: string };\r\n\r\nexport type UseLearningAnalyticsReturn = {\r\n  trackEvent: (name: string, payload?: EventPayload) => void;\r\n  isReady: boolean;\r\n};\r\n\r\nexport const useLearningAnalytics = (sessionId: string | null): {\r\n  events: AnalyticsEvent[];\r\n  trends: LearningTrends | null;\r\n  metrics: PerformanceMetrics | null;\r\n  isLoading: boolean;\r\n  logInteraction: (\r\n    interactionType: AnalyticsEvent['interaction_type'],\r\n    topic: string,\r\n    difficultyLevel: number,\r\n    successRate: number,\r\n    timeSpentSeconds: number,\r\n    cognitiveLoadEstimate: number,\r\n    engagementScore: number,\r\n    metadata?: EventPayload\r\n  ) => Promise<void>;\r\n  // Quick logging\r\n  logQuestionAsked: (topic: string, difficulty: number, metadata?: EventPayload) => Promise<void>;\r\n  logAnswerGiven: (topic: string, success_rate: number, time_seconds: number, difficulty: number, metadata?: EventPayload) => Promise<void>;\r\n  logMisconceptionCorrected: (topic: string, metadata?: EventPayload) => Promise<void>;\r\n  logConceptMastered: (topic: string, metadata?: EventPayload) => Promise<void>;\r\n  logScaffoldProvided: (topic: string, difficulty: number, metadata?: EventPayload) => Promise<void>;\r\n  getLearningInsights: () => Insight[];\r\n  refreshAnalytics: () => Promise<void>;\r\n} => {\r\n  const [events, setEvents] = useState<AnalyticsEvent[]>([]);\r\n  const [trends, setTrends] = useState<LearningTrends | null>(null);\r\n  const [metrics, setMetrics] = useState<PerformanceMetrics | null>(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const { user } = useAuth();\r\n\r\n  // Log learning interaction\r\n  const logInteraction = async (\r\n    interactionType: AnalyticsEvent['interaction_type'],\r\n    topic: string,\r\n    difficultyLevel: number,\r\n    successRate: number,\r\n    timeSpentSeconds: number,\r\n    cognitiveLoadEstimate: number,\r\n    engagementScore: number,\r\n    metadata: EventPayload = {}\r\n  ) => {\r\n    if (!user?.id || !sessionId) return;\r\n\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('learning_analytics')\r\n        .insert({\r\n          user_id: user.id,\r\n          session_id: sessionId,\r\n          interaction_type: interactionType,\r\n          topic,\r\n          difficulty_level: difficultyLevel,\r\n          success_rate: successRate,\r\n          time_spent_seconds: timeSpentSeconds,\r\n          cognitive_load_estimate: cognitiveLoadEstimate,\r\n          engagement_score: engagementScore,\r\n          metadata: metadata as unknown as Json\r\n        })\r\n        .select()\r\n        .single();\r\n\r\n      if (error) throw error;\r\n\r\n      setEvents(prev => [...prev, data as AnalyticsEvent]);\r\n    } catch (error) {\r\n      console.error('Error logging interaction:', error);\r\n    }\r\n  };\r\n\r\n  // Load analytics data\r\n  const loadAnalytics = async () => {\r\n    if (!user?.id) return;\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      // Load recent events\r\n      const { data: eventsData, error: eventsError } = await supabase\r\n        .from('learning_analytics')\r\n        .select('*')\r\n        .eq('user_id', user.id)\r\n        .order('created_at', { ascending: false })\r\n        .limit(100);\r\n\r\n      if (eventsError) throw eventsError;\r\n      setEvents((eventsData || []) as AnalyticsEvent[]);\r\n\r\n      // Calculate trends and metrics\r\n      if (eventsData && eventsData.length > 0) {\r\n        calculateTrends(eventsData as AnalyticsEvent[]);\r\n        calculateMetrics(eventsData as AnalyticsEvent[]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading analytics:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Calculate learning trends\r\n  const calculateTrends = (eventsData: AnalyticsEvent[]) => {\r\n    const sortedEvents = [...eventsData].sort((a, b) => \r\n      new Date(a.created_at!).getTime() - new Date(b.created_at!).getTime()\r\n    );\r\n\r\n    const understandingTrend = sortedEvents\r\n      .filter(e => e.interaction_type === 'answer_given')\r\n      .map(e => e.success_rate)\r\n      .slice(-20); // Last 20 interactions\r\n\r\n    const engagementTrend = sortedEvents\r\n      .map(e => e.engagement_score)\r\n      .slice(-20);\r\n\r\n    const difficultyProgression = sortedEvents\r\n      .map(e => e.difficulty_level)\r\n      .slice(-20);\r\n\r\n    // Topic mastery calculation\r\n    const topicMastery: Record<string, number[]> = {};\r\n    sortedEvents.forEach(event => {\r\n      if (!topicMastery[event.topic]) {\r\n        topicMastery[event.topic] = [];\r\n      }\r\n      topicMastery[event.topic].push(event.success_rate);\r\n    });\r\n\r\n    // Calculate average mastery for each topic\r\n    const finalTopicMastery: Record<string, number> = {};\r\n    Object.keys(topicMastery).forEach(topic => {\r\n      const scores = topicMastery[topic];\r\n      finalTopicMastery[topic] = scores.reduce((sum, score) => sum + score, 0) / scores.length;\r\n    });\r\n\r\n    // Time analysis\r\n    const sessionTimes = groupBy(sortedEvents, 'session_id');\r\n    const sessionDurations = Object.values(sessionTimes).map(sessionEvents => \r\n      sessionEvents.reduce((total, event) => total + event.time_spent_seconds, 0)\r\n    );\r\n\r\n    const averageSessionTime = sessionDurations.length > 0 \r\n      ? sessionDurations.reduce((sum, duration) => sum + duration, 0) / sessionDurations.length\r\n      : 0;\r\n\r\n    // Peak learning hours analysis\r\n    const hourCounts: Record<number, number> = {};\r\n    sortedEvents.forEach(event => {\r\n      const hour = new Date(event.created_at!).getHours();\r\n      hourCounts[hour] = (hourCounts[hour] || 0) + 1;\r\n    });\r\n\r\n    const peakLearningHours = Object.entries(hourCounts)\r\n      .sort(([,a], [,b]) => b - a)\r\n      .slice(0, 3)\r\n      .map(([hour]) => parseInt(hour));\r\n\r\n    // Consistency score (sessions per week over last month)\r\n    const now = new Date();\r\n    const lastMonth = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);\r\n    const recentSessions = Object.keys(sessionTimes).filter(sessionId => {\r\n      const sessionEvents = sessionTimes[sessionId];\r\n      return sessionEvents.some(event => new Date(event.created_at!) > lastMonth);\r\n    });\r\n\r\n    const consistencyScore = Math.min(1, recentSessions.length / 20); // 20 sessions in a month = perfect consistency\r\n\r\n    setTrends({\r\n      understanding_trend: understandingTrend,\r\n      engagement_trend: engagementTrend,\r\n      difficulty_progression: difficultyProgression,\r\n      topic_mastery: finalTopicMastery,\r\n      time_analysis: {\r\n        average_session_time: averageSessionTime,\r\n        peak_learning_hours: peakLearningHours,\r\n        consistency_score: consistencyScore\r\n      }\r\n    });\r\n  };\r\n\r\n  // Calculate performance metrics\r\n  const calculateMetrics = (eventsData: AnalyticsEvent[]) => {\r\n    const currentSessionEvents = eventsData.filter(e => e.session_id === sessionId);\r\n    const allSessions = groupBy(eventsData, 'session_id');\r\n\r\n    // Current session metrics\r\n    const currentSession = {\r\n      questions_answered: currentSessionEvents.filter(e => e.interaction_type === 'answer_given').length,\r\n      concepts_explored: new Set(currentSessionEvents.map(e => e.topic)).size,\r\n      misconceptions_addressed: currentSessionEvents.filter(e => e.interaction_type === 'misconception_corrected').length,\r\n      scaffolding_provided: currentSessionEvents.filter(e => e.interaction_type === 'scaffold_provided').length,\r\n      engagement_score: currentSessionEvents.length > 0 \r\n        ? currentSessionEvents.reduce((sum, e) => sum + e.engagement_score, 0) / currentSessionEvents.length\r\n        : 0\r\n    };\r\n\r\n    // Overall metrics\r\n    const allAnswerEvents = eventsData.filter(e => e.interaction_type === 'answer_given');\r\n    const averageUnderstanding = allAnswerEvents.length > 0\r\n      ? allAnswerEvents.reduce((sum, e) => sum + e.success_rate, 0) / allAnswerEvents.length\r\n      : 0;\r\n\r\n    // Improvement rate (comparing first 10 vs last 10 interactions)\r\n    const firstTen = allAnswerEvents.slice(0, 10);\r\n    const lastTen = allAnswerEvents.slice(-10);\r\n    const improvementRate = firstTen.length > 0 && lastTen.length > 0\r\n      ? (lastTen.reduce((sum, e) => sum + e.success_rate, 0) / lastTen.length) -\r\n        (firstTen.reduce((sum, e) => sum + e.success_rate, 0) / firstTen.length)\r\n      : 0;\r\n\r\n    // Mastered topics (>80% success rate)\r\n    const topicPerformance: Record<string, number[]> = {};\r\n    allAnswerEvents.forEach(event => {\r\n      if (!topicPerformance[event.topic]) {\r\n        topicPerformance[event.topic] = [];\r\n      }\r\n      topicPerformance[event.topic].push(event.success_rate);\r\n    });\r\n\r\n    const masteredTopics = Object.entries(topicPerformance)\r\n      .filter(([, scores]) => scores.reduce((sum, score) => sum + score, 0) / scores.length > 0.8)\r\n      .map(([topic]) => topic);\r\n\r\n    const strugglingAreas = Object.entries(topicPerformance)\r\n      .filter(([, scores]) => scores.reduce((sum, score) => sum + score, 0) / scores.length < 0.5)\r\n      .map(([topic]) => topic);\r\n\r\n    setMetrics({\r\n      current_session: currentSession,\r\n      overall: {\r\n        total_sessions: Object.keys(allSessions).length,\r\n        average_understanding: averageUnderstanding,\r\n        improvement_rate: improvementRate,\r\n        mastered_topics: masteredTopics,\r\n        struggling_areas: strugglingAreas\r\n      }\r\n    });\r\n  };\r\n\r\n  // Quick logging functions for common interactions\r\n  const logQuestionAsked = (topic: string, difficulty: number, metadata: EventPayload = {}) => {\r\n    return logInteraction('question_asked', topic, difficulty, 1, 0, 0.3, 0.8, metadata);\r\n  };\r\n\r\n  const logAnswerGiven = (topic: string, success_rate: number, time_seconds: number, difficulty: number, metadata: EventPayload = {}) => {\r\n    return logInteraction('answer_given', topic, difficulty, success_rate, time_seconds, 0.5, 0.7, metadata);\r\n  };\r\n\r\n  const logMisconceptionCorrected = (topic: string, metadata: EventPayload = {}) => {\r\n    return logInteraction('misconception_corrected', topic, 3, 1, 0, 0.6, 0.9, metadata);\r\n  };\r\n\r\n  const logConceptMastered = (topic: string, metadata: EventPayload = {}) => {\r\n    return logInteraction('concept_mastered', topic, 4, 1, 0, 0.4, 1, metadata);\r\n  };\r\n\r\n  const logScaffoldProvided = (topic: string, difficulty: number, metadata: EventPayload = {}) => {\r\n    return logInteraction('scaffold_provided', topic, difficulty, 1, 0, 0.7, 0.8, metadata);\r\n  };\r\n\r\n  // Get learning insights\r\n  const getLearningInsights = (): Insight[] => {\r\n    if (!trends || !metrics) return [];\r\n\r\n    const insights: Insight[] = [];\r\n\r\n    // Understanding trend analysis\r\n    if (trends.understanding_trend.length >= 5) {\r\n      const recent = trends.understanding_trend.slice(-5);\r\n      const average = recent.reduce((sum, val) => sum + val, 0) / recent.length;\r\n      \r\n      if (average > 0.8) {\r\n        insights.push({\r\n          type: 'positive',\r\n          title: 'Excellent Understanding',\r\n          message: 'You\\'re demonstrating strong comprehension across topics!',\r\n          priority: 'high'\r\n        });\r\n      } else if (average < 0.5) {\r\n        insights.push({\r\n          type: 'concern',\r\n          title: 'Understanding Needs Attention',\r\n          message: 'Let\\'s focus on building stronger foundations in key concepts.',\r\n          priority: 'high'\r\n        });\r\n      }\r\n    }\r\n\r\n    // Engagement analysis\r\n    if (trends.engagement_trend.length >= 3) {\r\n      const recent = trends.engagement_trend.slice(-3);\r\n      const average = recent.reduce((sum, val) => sum + val, 0) / recent.length;\r\n      \r\n      if (average < 0.6) {\r\n        insights.push({\r\n          type: 'engagement',\r\n          title: 'Engagement Opportunity',\r\n          message: 'Try exploring topics that interest you more or take short breaks.',\r\n          priority: 'medium'\r\n        });\r\n      }\r\n    }\r\n\r\n    // Improvement analysis\r\n    if (metrics.overall.improvement_rate > 0.2) {\r\n      insights.push({\r\n        type: 'positive',\r\n        title: 'Great Progress!',\r\n        message: `You've improved significantly! Keep up the excellent work.`,\r\n        priority: 'medium'\r\n      });\r\n    }\r\n\r\n    return insights;\r\n  };\r\n\r\n  // Utility function for grouping\r\n  const groupBy = <T, K extends keyof T>(array: T[], key: K): Record<string, T[]> => {\r\n    return array.reduce((groups, item) => {\r\n      const groupKey = String(item[key]);\r\n      if (!groups[groupKey]) {\r\n        groups[groupKey] = [];\r\n      }\r\n      groups[groupKey].push(item);\r\n      return groups;\r\n    }, {} as Record<string, T[]>);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (user?.id) {\r\n      loadAnalytics();\r\n    }\r\n  }, [user?.id]);\r\n\r\n  return {\r\n    events,\r\n    trends,\r\n    metrics,\r\n    isLoading,\r\n    \r\n    // Core logging\r\n    logInteraction,\r\n    \r\n    // Quick logging functions\r\n    logQuestionAsked,\r\n    logAnswerGiven,\r\n    logMisconceptionCorrected,\r\n    logConceptMastered,\r\n    logScaffoldProvided,\r\n    \r\n    // Analysis\r\n    getLearningInsights,\r\n    refreshAnalytics: loadAnalytics\r\n  };\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jashon\\OneDrive\\Documents\\GitHub\\fpk-learner-v1\\src\\scorm\\ingest\\manifest-parser.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":57,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1337,1340],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1337,1340],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":59,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":59,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1363,1366],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1363,1366],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":126,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":126,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3428,3431],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3428,3431],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":132,"column":97,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":132,"endColumn":100,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3768,3771],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3768,3771],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":150,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":150,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4615,4618],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4615,4618],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":151,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":151,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4674,4677],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4674,4677],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":151,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":151,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4722,4725],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4722,4725],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":151,"column":107,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":151,"endColumn":110,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4757,4760],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4757,4760],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":151,"column":124,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":151,"endColumn":127,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4774,4777],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4774,4777],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":151,"column":147,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":151,"endColumn":150,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4797,4800],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4797,4800],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":174,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":174,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5682,5685],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5682,5685],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":186,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":186,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6087,6090],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6087,6090],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":196,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":196,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6438,6441],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6438,6441],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":218,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":218,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7175,7178],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7175,7178],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":223,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":223,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7319,7322],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7319,7322],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":238,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":238,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7986,7989],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7986,7989],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":255,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":255,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8947,8950],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8947,8950],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":257,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":257,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9031,9034],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9031,9034],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":257,"column":90,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":257,"endColumn":93,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9066,9069],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9066,9069],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":257,"column":125,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":257,"endColumn":128,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9101,9104],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9101,9104],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":259,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":259,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9160,9163],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9160,9163],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":323,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":323,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11402,11405],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11402,11405],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":357,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":357,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12646,12649],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12646,12649],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":359,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":359,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12741,12744],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12741,12744],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":363,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":363,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12893,12896],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12893,12896],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":374,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":374,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13264,13267],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13264,13267],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":26,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { XMLParser } from 'fast-xml-parser';\r\n\r\nexport interface ManifestResource {\r\n  identifier: string;\r\n  type: string;\r\n  href: string;\r\n  scormType?: string;\r\n  adlcpScormType?: string;\r\n  metadata?: unknown;\r\n}\r\n\r\nexport interface ManifestItem {\r\n  identifier: string;\r\n  title: string;\r\n  identifierref?: string;\r\n  isVisible?: boolean;\r\n  parameters?: string;\r\n  masteryScore?: number;\r\n  prerequisites?: string[];\r\n  children?: ManifestItem[];\r\n  resourceHref?: string;\r\n  completionThreshold?: number;\r\n  timeLimitAction?: string;\r\n  dataFromLMS?: string;\r\n  sequencing?: unknown;\r\n}\r\n\r\nexport interface ManifestOrganization {\r\n  identifier: string;\r\n  title: string;\r\n  structure?: string;\r\n  items: ManifestItem[];\r\n  objectives?: unknown[];\r\n  sequencing?: unknown;\r\n}\r\n\r\nexport interface ParsedManifest {\r\n  version: string;\r\n  standard: 'SCORM 1.2' | 'SCORM 2004';\r\n  identifier: string;\r\n  title: string;\r\n  description?: string;\r\n  organizations: ManifestOrganization[];\r\n  resources: ManifestResource[];\r\n  scos: Array<{\r\n    id: string;\r\n    identifier: string;\r\n    title: string;\r\n    launch_href: string;\r\n    parameters?: string;\r\n    mastery_score?: number;\r\n    prerequisites?: string[];\r\n    seq_order: number;\r\n    resourceType?: string;\r\n    scormType?: string;\r\n    isLaunchable: boolean;\r\n    sequencing?: any;\r\n  }>;\r\n  metadata?: any;\r\n  defaultOrganization?: string;\r\n  schemaLocation?: string;\r\n  validation: {\r\n    isValid: boolean;\r\n    errors: string[];\r\n    warnings: string[];\r\n  };\r\n}\r\n\r\nexport class ScormManifestParser {\r\n  private xmlParser: XMLParser;\r\n\r\n  constructor() {\r\n    this.xmlParser = new XMLParser({\r\n      ignoreAttributes: false,\r\n      attributeNamePrefix: '@',\r\n      textNodeName: '#text',\r\n      parseAttributeValue: true,\r\n      trimValues: true,\r\n      alwaysCreateTextNode: false,\r\n      processEntities: true,\r\n      htmlEntities: true\r\n    });\r\n  }\r\n\r\n  public parseManifest(xmlContent: string): ParsedManifest {\r\n    try {\r\n      const parsedXml = this.xmlParser.parse(xmlContent);\r\n      const manifest = (parsedXml as Record<string, unknown>).manifest || (parsedXml as Record<string, unknown>)['imscp:manifest'];\r\n\r\n      if (!manifest) {\r\n        throw new Error('No manifest element found in XML');\r\n      }\r\n\r\n      const validation = this.validateManifest(manifest);\r\n      const standard = this.detectStandard(manifest);\r\n      const version = this.extractVersion(manifest, standard);\r\n\r\n      // Extract basic manifest info\r\n      const m = manifest as Record<string, unknown>;\r\n      const identifier = (m['@identifier'] as string) || 'unknown';\r\n      const title = this.extractTitle(manifest) || 'Untitled Package';\r\n      const description = this.extractDescription(manifest);\r\n\r\n      // Parse organizations\r\n      const organizations = this.parseOrganizations(m.organizations, standard);\r\n      \r\n      // Parse resources\r\n      const resources = this.parseResources(m.resources);\r\n      \r\n      // Extract SCOs by matching items with resources\r\n      const scos = this.extractScos(organizations, resources, standard);\r\n\r\n      // Extract metadata\r\n      const metadata = this.extractMetadata(manifest);\r\n\r\n      return {\r\n        version,\r\n        standard,\r\n        identifier,\r\n        title,\r\n        description,\r\n        organizations,\r\n        resources,\r\n        scos,\r\n        metadata,\r\n        defaultOrganization: (m.organizations as any)?.['@default'] || organizations[0]?.identifier,\r\n        schemaLocation: (m['@schemaLocation'] as string) || (m['@xsi:schemaLocation'] as string),\r\n        validation\r\n      };\r\n    } catch (error: unknown) {\r\n      // Narrow error safely\r\n      const msg = (error && typeof error === 'object' && 'message' in error) ? String((error as any).message) : String(error);\r\n      console.error('Manifest parsing error:', msg);\r\n      throw new Error(`Failed to parse manifest: ${msg}`);\r\n    }\r\n  }\r\n\r\n  private detectStandard(manifest: unknown): 'SCORM 1.2' | 'SCORM 2004' {\r\n    if (!manifest || typeof manifest !== 'object') return 'SCORM 1.2';\r\n    const m = manifest as Record<string, unknown>;\r\n    // Check namespaces and schema locations\r\n    const xmlNamespaces = Object.keys(m).filter(key => key.startsWith('@xmlns'));\r\n    const schemaLocation = (m['@schemaLocation'] as string) || (m['@xsi:schemaLocation'] as string) || '';\r\n\r\n    // SCORM 2004 indicators\r\n    if (\r\n      xmlNamespaces.some(ns => typeof m[ns] === 'string' && String(m[ns]).includes('imsss')) ||\r\n      schemaLocation.includes('imsss') ||\r\n      schemaLocation.includes('2004') ||\r\n      ((m.organizations as any)?.organization?.sequencing) ||\r\n      ((m.resources as any)?.resource && Array.isArray((m.resources as any).resource) && ((m.resources as any).resource as any[]).some(r => (r as any)['@adlcp:scormType']))\r\n    ) {\r\n      return 'SCORM 2004';\r\n    }\r\n\r\n    // SCORM 1.2 indicators or default\r\n    return 'SCORM 1.2';\r\n  }\r\n\r\n  private extractVersion(manifest: unknown, standard: 'SCORM 1.2' | 'SCORM 2004'): string {\r\n    const m = manifest as Record<string, unknown>;\r\n    if (standard === 'SCORM 2004') {\r\n      const schemaLocation = (m['@schemaLocation'] as string) || (m['@xsi:schemaLocation'] as string) || '';\r\n      if (schemaLocation.includes('2004_4th')) return '2004 4th Edition';\r\n      if (schemaLocation.includes('2004_3rd')) return '2004 3rd Edition';\r\n      if (schemaLocation.includes('2004')) return '2004';\r\n    }\r\n    \r\n    return (m['@version'] as string) || (standard === 'SCORM 1.2' ? '1.2' : '2004');\r\n  }\r\n\r\n  private extractTitle(manifest: unknown): string {\r\n    // Try multiple paths for title\r\n    const m = manifest as Record<string, any>;\r\n    const metadata = m.metadata;\r\n    if (metadata?.lom?.general?.title) {\r\n      const title = metadata.lom.general.title;\r\n      return title.langstring?.[\"#text\"] || title.langstring || title[\"#text\"] || title;\r\n    }\r\n    \r\n    if (metadata?.title) {\r\n      return metadata.title[\"#text\"] || metadata.title;\r\n    }\r\n\r\n    // Fallback to organization title\r\n    const orgs = (m.organizations as any)?.organization;\r\n    if (orgs) {\r\n      const firstOrg = Array.isArray(orgs) ? orgs[0] : orgs;\r\n      return firstOrg?.title?.[\"#text\"] || firstOrg?.title || firstOrg?.[\"@title\"];\r\n    }\r\n\r\n    return 'Untitled SCORM Package';\r\n  }\r\n\r\n  private extractDescription(manifest: unknown): string | undefined {\r\n    const m = manifest as Record<string, any>;\r\n    const metadata = m.metadata;\r\n    if (metadata?.lom?.general?.description) {\r\n      const desc = metadata.lom.general.description;\r\n      return desc.langstring?.[\"#text\"] || desc.langstring || desc[\"#text\"] || desc;\r\n    }\r\n    \r\n    if (metadata?.description) {\r\n      return metadata.description[\"#text\"] || metadata.description;\r\n    }\r\n    \r\n    return undefined;\r\n  }\r\n\r\n  private extractMetadata(manifest: unknown): unknown {\r\n    const m = manifest as Record<string, unknown>;\r\n    return m.metadata || {};\r\n  }\r\n\r\n  private parseOrganizations(organizationsNode: unknown, standard: 'SCORM 1.2' | 'SCORM 2004'): ManifestOrganization[] {\r\n    if (!organizationsNode) return [];\r\n\r\n    const orgs = (organizationsNode as any).organization;\r\n    if (!orgs) return [];\r\n\r\n    const orgArray = Array.isArray(orgs) ? orgs : [orgs];\r\n    \r\n    return orgArray.map((org: any, index: number) => ({\r\n      identifier: org['@identifier'] || `org_${index}`,\r\n      title: org.title?.[\"#text\"] || org.title || org[\"@title\"] || `Organization ${index + 1}`,\r\n      structure: org['@structure'] || 'hierarchical',\r\n      items: this.parseItems(org.item, standard),\r\n      objectives: org.objectives || [],\r\n      sequencing: standard === 'SCORM 2004' ? org.sequencing : undefined\r\n    }));\r\n  }\r\n\r\n  private parseItems(itemsNode: unknown, standard: 'SCORM 1.2' | 'SCORM 2004', level = 0): ManifestItem[] {\r\n    if (!itemsNode) return [];\r\n\r\n    const items = Array.isArray(itemsNode) ? itemsNode : [itemsNode];\r\n    \r\n    return items.map((item: any, index: number) => ({\r\n      identifier: item['@identifier'] || `item_${level}_${index}`,\r\n      title: item.title?.[\"#text\"] || item.title || item[\"@title\"] || `Item ${index + 1}`,\r\n      identifierref: item['@identifierref'],\r\n      isVisible: item['@isvisible'] !== 'false', // Default to true\r\n      parameters: item['@parameters'],\r\n      masteryScore: item.masteryScore ? parseFloat(item.masteryScore) : undefined,\r\n      prerequisites: item.prerequisites?.split(',').map((p: string) => p.trim()) || [],\r\n      children: this.parseItems(item.item, standard, level + 1),\r\n      sequencing: standard === 'SCORM 2004' ? item.sequencing : undefined,\r\n      completionThreshold: item.completionThreshold ? parseFloat(item.completionThreshold) : undefined,\r\n      timeLimitAction: item.timeLimitAction,\r\n      dataFromLMS: item.dataFromLMS\r\n    }));\r\n  }\r\n\r\n  private parseResources(resourcesNode: unknown): ManifestResource[] {\r\n    if (!(resourcesNode as any)?.resource) return [];\r\n\r\n    const resources = Array.isArray((resourcesNode as any).resource) ? (resourcesNode as any).resource : [(resourcesNode as any).resource];\r\n    \r\n    return resources.map((resource: any) => ({\r\n      identifier: resource['@identifier'] || '',\r\n      type: resource['@type'] || 'webcontent',\r\n      href: resource['@href'] || resource['@xml:base'] || '',\r\n      scormType: resource['@scormtype'] || resource['@adlcp:scormType'],\r\n      adlcpScormType: resource['@adlcp:scormType'],\r\n      metadata: resource.metadata\r\n    }));\r\n  }\r\n\r\n  private extractScos(\r\n    organizations: ManifestOrganization[], \r\n    resources: ManifestResource[], \r\n    standard: 'SCORM 1.2' | 'SCORM 2004'\r\n  ): ParsedManifest['scos'] {\r\n    const scos: ParsedManifest['scos'] = [];\r\n    let seqOrder = 1;\r\n\r\n    const processItems = (items: ManifestItem[], orgId: string) => {\r\n      items.forEach((item) => {\r\n        if (item.identifierref) {\r\n          const resource = resources.find(r => r.identifier === item.identifierref);\r\n          if (resource) {\r\n            const isLaunchable = this.isLaunchableResource(resource, standard);\r\n            \r\n            scos.push({\r\n              id: `${orgId}_${item.identifier}`,\r\n              identifier: item.identifier,\r\n              title: item.title,\r\n              launch_href: resource.href,\r\n              parameters: item.parameters,\r\n              mastery_score: item.masteryScore,\r\n              prerequisites: item.prerequisites || [],\r\n              seq_order: seqOrder++,\r\n              resourceType: resource.type,\r\n              scormType: resource.scormType || resource.adlcpScormType,\r\n              isLaunchable,\r\n              sequencing: item.sequencing\r\n            });\r\n          }\r\n        }\r\n        \r\n        // Process child items recursively\r\n        if (item.children && item.children.length > 0) {\r\n          processItems(item.children, orgId);\r\n        }\r\n      });\r\n    };\r\n\r\n    organizations.forEach(org => {\r\n      processItems(org.items, org.identifier);\r\n    });\r\n\r\n    return scos;\r\n  }\r\n\r\n  private isLaunchableResource(resource: ManifestResource, standard: 'SCORM 1.2' | 'SCORM 2004'): boolean {\r\n    if (standard === 'SCORM 1.2') {\r\n      return resource.scormType === 'sco' || resource.type === 'webcontent';\r\n    } else {\r\n      return resource.adlcpScormType === 'sco' || resource.scormType === 'sco';\r\n    }\r\n  }\r\n\r\n  private validateManifest(manifest: any): { isValid: boolean; errors: string[]; warnings: string[] } {\r\n    const errors: string[] = [];\r\n    const warnings: string[] = [];\r\n\r\n    // Basic structure validation\r\n    if (!manifest['@identifier']) {\r\n      errors.push('Manifest missing required identifier attribute');\r\n    }\r\n\r\n    if (!manifest.organizations) {\r\n      errors.push('Manifest missing organizations element');\r\n    }\r\n\r\n    if (!manifest.resources) {\r\n      errors.push('Manifest missing resources element');\r\n    }\r\n\r\n    // Organizations validation\r\n    if (manifest.organizations && !manifest.organizations.organization) {\r\n      errors.push('Organizations element contains no organization');\r\n    }\r\n\r\n    // Resources validation\r\n    if (manifest.resources && !manifest.resources.resource) {\r\n      warnings.push('Resources element contains no resource');\r\n    }\r\n\r\n    // Check for broken references\r\n    if (manifest.organizations?.organization) {\r\n      const orgs = Array.isArray(manifest.organizations.organization) ? \r\n        manifest.organizations.organization : [manifest.organizations.organization];\r\n      \r\n      const resources = manifest.resources?.resource || [];\r\n      const resourceIds = Array.isArray(resources) ? \r\n        resources.map((r: any) => r['@identifier']) : [resources['@identifier']];\r\n\r\n      const checkItemRefs = (items: any[]) => {\r\n        if (!items) return;\r\n        const itemArray = Array.isArray(items) ? items : [items];\r\n        \r\n        itemArray.forEach((item: any) => {\r\n          if (item['@identifierref'] && !resourceIds.includes(item['@identifierref'])) {\r\n            errors.push(`Item '${item['@identifier']}' references unknown resource '${item['@identifierref']}'`);\r\n          }\r\n          \r\n          if (item.item) {\r\n            checkItemRefs(item.item);\r\n          }\r\n        });\r\n      };\r\n\r\n      orgs.forEach((org: any) => {\r\n        if (org.item) {\r\n          checkItemRefs(org.item);\r\n        }\r\n      });\r\n    }\r\n\r\n    return {\r\n      isValid: errors.length === 0,\r\n      errors,\r\n      warnings\r\n    };\r\n  }\r\n}\r\n\r\n// Export singleton instance\r\nexport const manifestParser = new ScormManifestParser();\r\n\r\n// Convenience function\r\nexport function parseScormManifest(xmlContent: string): ParsedManifest {\r\n  return manifestParser.parseManifest(xmlContent);\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jashon\\OneDrive\\Documents\\GitHub\\fpk-learner-v1\\src\\utils\\logger.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]